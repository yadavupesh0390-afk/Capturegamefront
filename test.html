<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Delivery Test</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  label { display: block; margin-top: 10px; }
  input { width: 200px; padding: 5px; margin-top: 5px; }
  button { margin-top: 15px; padding: 10px 20px; }
  pre { background: #f4f4f4; padding: 10px; margin-top: 20px; }
</style>
</head>
<body>

<h2>Delivery Calculation Test</h2>

<label>Order Amount (â‚¹)
  <input type="number" id="orderAmount" value="1200">
</label>

<label>Vehicle Type
  <select id="vehicleType">
    <option value="two_wheeler">Two Wheeler</option>
    <option value="three_wheeler">Three Wheeler</option>
    <option value="four_wheeler">Four Wheeler</option>
  </select>
</label>

<label>Retailer Location (lat,lng)
  <input type="text" id="retailerLat" placeholder="28.6139">
  <input type="text" id="retailerLng" placeholder="77.2090">
</label>

<label>Wholesaler Location (lat,lng)
  <input type="text" id="wholesalerLat" placeholder="28.7041">
  <input type="text" id="wholesalerLng" placeholder="77.1025">
</label>

<label>Time in Minutes
  <input type="number" id="timeMinutes" value="15">
</label>

<button onclick="calculateDelivery()">Check Delivery</button>

<pre id="result">Result will appear here...</pre>

<script>
async function calculateDelivery() {
  const orderAmount = Number(document.getElementById("orderAmount").value);
  const vehicleType = document.getElementById("vehicleType").value;
  const retailerLocation = {
    lat: Number(document.getElementById("retailerLat").value),
    lng: Number(document.getElementById("retailerLng").value)
  };
  const wholesalerLocation = {
    lat: Number(document.getElementById("wholesalerLat").value),
    lng: Number(document.getElementById("wholesalerLng").value)
  };
  const timeMinutes = Number(document.getElementById("timeMinutes").value);

  try {
    const res = await fetch("http://localhost:5000/api/delivery/calculate", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ orderAmount, vehicleType, retailerLocation, wholesalerLocation, timeMinutes })
    });

    const data = await res.json();
    document.getElementById("result").textContent = JSON.stringify(data, null, 2);
  } catch (err) {
    document.getElementById("result").textContent = "Error: " + err.message;
  }
}
</script>

</body>
</html>
